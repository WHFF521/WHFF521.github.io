<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>AiRomance</title>
  <icon>https://blog.whff521.xyz/images/101.ico</icon>
  <subtitle>爱裸漫三三</subtitle>
  <link href="https://blog.whff521.xyz/atom.xml" rel="self"/>
  <link href="https://pubsubhubbub.appspot.com/" rel="hub"/>
  <link href="https://blog.whff521.xyz/"/>
  <updated>2024-09-12T14:59:18.880Z</updated>
  <id>https://blog.whff521.xyz/</id>
  
  <author>
    <name>AiRomance</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>HDOJ 1010 Tempter of the Bone 深搜&amp;剪枝</title>
    <link href="https://blog.whff521.xyz/2024/09/12/HDOJ-1010-Tempter-of-the-Bone-%E6%B7%B1%E6%90%9C-%E5%89%AA%E6%9E%9D/"/>
    <id>https://blog.whff521.xyz/2024/09/12/HDOJ-1010-Tempter-of-the-Bone-%E6%B7%B1%E6%90%9C-%E5%89%AA%E6%9E%9D/</id>
    <published>2024-09-12T14:29:27.000Z</published>
    <updated>2024-09-12T14:59:18.880Z</updated>
    
    <content type="html"><![CDATA[<h1 id="细心和智慧并存的解答"><a href="#细心和智慧并存的解答" class="headerlink" title="细心和智慧并存的解答"></a>细心和智慧并存的解答</h1><p><a href="https://acm.hdu.edu.cn/showproblem.php?pid=1010">题目链接</a> </p><p>题的大致意思是能不能从起点经过T时间精准到达终点，图中有一些障碍不能走，走过的格子也不能再走。</p><p>其中数据是最大7*7的迷宫，最多50个迷宫。</p><h2 id="智慧之处——精准的剪枝"><a href="#智慧之处——精准的剪枝" class="headerlink" title="智慧之处——精准的剪枝"></a>智慧之处——精准的剪枝</h2><p>类似全排列的深搜时间复杂度是O(n!)，7*7的数据是过不去的。  </p><p>首先就是普通地剪枝：</p><ul><li>如果时间已经大于T，就不用再走了</li><li>如果已经有正确答案，要及时地退出搜索</li></ul><p>然后是奇偶剪枝，这里参考了<a href="https://blog.csdn.net/code_pang/article/details/8839432">其他博客</a>  </p><p>这里我重新画了一张图，如下：</p><p><img src="https://images.whff521.top/maze.jpg" alt="maze"></p><p>图中的S可以代表任何你走到的位置，不一定是起点。就如图中的红色和蓝色路径，这两条路径是最少需要的时间。如果剩余时间少于最短路径长度，那么是一定不能到达终点的。  </p><p>既然时间不够一定不能到达，时间刚好和剩余最少时间相等也能到达，那么还剩一种情况，就是时间大于剩余最少时间。这也应该是大概率会遇到的情况。根据题意我们只能在第T秒精准到达终点，我们时间多出来的怎么办呢？——我们需要在终点周围“<strong>徘徊</strong>”。  </p><p>如图中的绿色和黄色箭头所示，你比最短路径多走出来的路径，一定是先“出去”，再“回来”。多走的路径是“对称的”，那多出来的路径长度一定是偶数。  </p><p>这就是奇偶性剪枝。加上这个剪枝就能过所有的测试数据。</p><h2 id="细心之处——多数据下数组的重复利用"><a href="#细心之处——多数据下数组的重复利用" class="headerlink" title="细心之处——多数据下数组的重复利用"></a>细心之处——多数据下数组的重复利用</h2><p>尽管我写过无数个全排列暴力骗过不少10分、20分。但是在这道题上还是因为粗心而浪费了不少时间。  </p><p>在做杭电这前十道题的时候我就发现基本都是多数据的形式。所以除了输入会重新填入数据的数组外，其他数据都需要进行“<strong>初始化</strong>”。</p><p>但是即使我清空了<code>vis</code>数据，我发现代码运行的答案竟然是错误的（样例是能过的）。  </p><p>原因就是这道题毕竟不是全排列，vis数组不能只在dfs的for循环中去设置。<strong>你的起点在你走出第一步后就再也不能回来了</strong>。</p><p><code>vis[startX][startY]=true;</code></p><p>代码： </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> mp[<span class="number">10</span>][<span class="number">10</span>];</span><br><span class="line"><span class="type">int</span> n,m,T;</span><br><span class="line"><span class="type">bool</span> vis[<span class="number">10</span>][<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> dx[<span class="number">4</span>]=&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">-1</span>&#125;;</span><br><span class="line"><span class="type">int</span> dy[<span class="number">4</span>]=&#123;<span class="number">1</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">string ans;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> startX,startY,endX,endY;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> step)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(ans==<span class="string">&quot;YES&quot;</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(step&gt;T) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(mp[x][y]==<span class="string">&#x27;D&#x27;</span>&amp;&amp;step==T)&#123;</span><br><span class="line">        ans = <span class="string">&quot;YES&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 剩余时间小于到终点的最短距离</span></span><br><span class="line">    <span class="keyword">if</span>(T-step&lt;(<span class="built_in">abs</span>(x-endX)+<span class="built_in">abs</span>(y-endY)))&#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 剩余时间剪去最短距离不是偶数</span></span><br><span class="line">    <span class="keyword">if</span>((T-step-(<span class="built_in">abs</span>(x-endX)+<span class="built_in">abs</span>(y-endY)))%<span class="number">2</span>!=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">        <span class="type">int</span> nx = x+dx[i];</span><br><span class="line">        <span class="type">int</span> ny = y+dy[i];</span><br><span class="line">        <span class="keyword">if</span>(nx&gt;=<span class="number">1</span>&amp;&amp;nx&lt;=n&amp;&amp;ny&gt;=<span class="number">1</span>&amp;&amp;ny&lt;=m&amp;&amp;!vis[nx][ny]&amp;&amp;mp[nx][ny]!=<span class="string">&#x27;X&#x27;</span>)&#123;</span><br><span class="line">            vis[nx][ny]=<span class="literal">true</span>;</span><br><span class="line">            <span class="built_in">dfs</span>(nx,ny,step+<span class="number">1</span>);</span><br><span class="line">            vis[nx][ny]=<span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;n,&amp;m,&amp;T);</span><br><span class="line">        <span class="keyword">if</span>(!n&amp;&amp;!m&amp;&amp;!T) <span class="keyword">break</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=m;j++)&#123;</span><br><span class="line">                cin&gt;&gt;mp[i][j];</span><br><span class="line">                <span class="keyword">if</span>(mp[i][j]==<span class="string">&#x27;S&#x27;</span>)&#123;</span><br><span class="line">                    startX=i;</span><br><span class="line">                    startY=j;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(mp[i][j]==<span class="string">&#x27;D&#x27;</span>)&#123;</span><br><span class="line">                    endX=i;</span><br><span class="line">                    endY=j;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ans = <span class="string">&quot;NO&quot;</span>;</span><br><span class="line">        <span class="comment">// vis记得清空</span></span><br><span class="line">        <span class="built_in">memset</span>(vis,<span class="literal">false</span>,<span class="built_in">sizeof</span>(vis));</span><br><span class="line">        <span class="comment">// 起点要标记为已访问 </span></span><br><span class="line">        vis[startX][startY]=<span class="literal">true</span>;</span><br><span class="line">        <span class="built_in">dfs</span>(startX,startY,<span class="number">0</span>);</span><br><span class="line">        cout&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;细心和智慧并存的解答&quot;&gt;&lt;a href=&quot;#细心和智慧并存的解答&quot; class=&quot;headerlink&quot; title=&quot;细心和智慧并存的解答&quot;&gt;&lt;/a&gt;细心和智慧并存的解答&lt;/h1&gt;&lt;p&gt;&lt;a</summary>
        
      
    
    
    
    <category term="算法题" scheme="https://blog.whff521.xyz/categories/%E7%AE%97%E6%B3%95%E9%A2%98/"/>
    
    
    <category term="深搜" scheme="https://blog.whff521.xyz/tags/%E6%B7%B1%E6%90%9C/"/>
    
    <category term="剪枝" scheme="https://blog.whff521.xyz/tags/%E5%89%AA%E6%9E%9D/"/>
    
  </entry>
  
  <entry>
    <title>HDOJ 1007 Quoit Design 圆环设计</title>
    <link href="https://blog.whff521.xyz/2024/09/11/HDOJ-1007-Quoit-Design-%E5%9C%86%E7%8E%AF%E8%AE%BE%E8%AE%A1/"/>
    <id>https://blog.whff521.xyz/2024/09/11/HDOJ-1007-Quoit-Design-%E5%9C%86%E7%8E%AF%E8%AE%BE%E8%AE%A1/</id>
    <published>2024-09-10T16:42:25.000Z</published>
    <updated>2024-09-11T00:33:45.048Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一道经典的分治"><a href="#一道经典的分治" class="headerlink" title="一道经典的分治"></a>一道经典的分治</h1><p><a href="https://acm.hdu.edu.cn/showproblem.php?pid=1007">题目链接</a></p><p>题意是套圈游戏要设计一款尺寸最大的圆环，满足圆环不会一次套中两个物品。每个物品有一个摆放坐标。我们要求的是这些物品中相邻最近的两个物品之间的距离，这个距离就是我们要求的圆环的直径。  </p><p>这个类型网上常称为<code>寻找最近点对问题</code>。  </p><p>数据是十万（1e5），分治算法时间复杂度是<code>O(nlogn)</code>，刚好能够跑完。</p><p>分治的思想就是我们先将所有点按照横坐标从小到大排序，然后将点分成左右两部分，也就是图中的<code>L</code>和<code>R</code>区域，这样我们就可以分别求两边的距离最小值。当然在中间线的<code>mid</code>部分也是需要求距离的。</p><p>在算完两边的距离最小值<code>d</code>后，我们将中间线向左和向右扩展<code>d</code>长度，组成<code>mid</code>的领域。可以知道如果领域再扩大增加的点并不会形成更优的答案。这里需要注意，我们的<code>L</code>和<code>R</code>区域是以中间线为界，也就是说<code>mid</code>区域其实是叠加在两边区域之上的。</p><p><img src="https://images.whff521.top/fenzhi.jpg" alt="fenzhi"></p><p>虽然中间区域的点已经会排除掉一些点，但是直接用双重循环找最短距离会超时。这是因为如果点都在中间密集的话时间复杂度会接近<code>O(n*n)</code>。</p><p>所以我们需要把中间点按照<code>y</code>的从小到大排序，在循环中如果两点纵坐标之间的距离已经大于<code>d</code>的时候及时跳出循环，完成剪枝。在<a href="http://oi-wiki.com/geometry/nearest-points/">oi-wiki</a>中有证明，这里的满足条件的点不会超过7。</p><p>边界问题：自己与自己之间距离设置成足够大的值，如果区间只有两个点，则直接计算两点之间距离。</p><p><strong>PS: 函数命名不要用distance，会和C++库中函数重名而导致CE</strong> </p><p>代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mxlen = <span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line">    <span class="type">double</span> x;</span><br><span class="line">    <span class="type">double</span> y;</span><br><span class="line">&#125;points[mxlen];</span><br><span class="line"><span class="comment">// sort by x</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmpx</span><span class="params">(node qw,node er)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(qw.x==er.x) <span class="keyword">return</span> qw.y&lt;er.y;</span><br><span class="line">    <span class="keyword">return</span> qw.x&lt;er.x;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// sort by y</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmpy</span><span class="params">(node qw,node er)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(qw.y==er.y) <span class="keyword">return</span> qw.x&lt;er.x;</span><br><span class="line">    <span class="keyword">return</span> qw.y&lt;er.y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// count the distance between two points</span></span><br><span class="line"><span class="comment">// name can not be distance, because there is a function named distance in cmath</span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">dis</span><span class="params">(node qw,node er)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sqrt</span>((qw.x-er.x)*(qw.x-er.x)+(qw.y-er.y)*(qw.y-er.y));</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line">node temp[mxlen];</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">solve</span><span class="params">(<span class="type">int</span> l,<span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l==r) <span class="keyword">return</span> <span class="number">1e20</span>;</span><br><span class="line">    <span class="comment">// if there are only two points</span></span><br><span class="line">    <span class="keyword">if</span>(l+<span class="number">1</span>==r) <span class="keyword">return</span> <span class="built_in">dis</span>(points[l],points[r]);</span><br><span class="line">    <span class="type">int</span> mid = (l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="type">double</span> d = <span class="built_in">min</span>(<span class="built_in">solve</span>(l,mid),<span class="built_in">solve</span>(mid+<span class="number">1</span>,r));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// sort by y, otherwise the code will TLE</span></span><br><span class="line">    <span class="type">int</span> len = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=mid;i&gt;=l&amp;&amp;points[mid].x-points[i].x&lt;d;i--) temp[len++] = points[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=mid+<span class="number">1</span>;i&lt;=r&amp;&amp;points[i].x-points[mid].x&lt;d;i++) temp[len++] = points[i];</span><br><span class="line">    <span class="built_in">sort</span>(temp+<span class="number">1</span>,temp+len,cmpy);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;len;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=i+<span class="number">1</span>;j&lt;len&amp;&amp;temp[j].y-temp[i].y&lt;d;j++)&#123;</span><br><span class="line">            d = <span class="built_in">min</span>(d,<span class="built_in">dis</span>(temp[i],temp[j]));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">        <span class="keyword">if</span>(!n) <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%lf%lf&quot;</span>,&amp;points[i].x,&amp;points[i].y);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">sort</span>(points+<span class="number">1</span>,points+n+<span class="number">1</span>,cmpx);</span><br><span class="line">        <span class="type">double</span> ans = <span class="built_in">solve</span>(<span class="number">1</span>,n);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%.2f\n&quot;</span>,ans/<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;一道经典的分治&quot;&gt;&lt;a href=&quot;#一道经典的分治&quot; class=&quot;headerlink&quot; title=&quot;一道经典的分治&quot;&gt;&lt;/a&gt;一道经典的分治&lt;/h1&gt;&lt;p&gt;&lt;a</summary>
        
      
    
    
    
    <category term="算法题" scheme="https://blog.whff521.xyz/categories/%E7%AE%97%E6%B3%95%E9%A2%98/"/>
    
    
    <category term="分治" scheme="https://blog.whff521.xyz/tags/%E5%88%86%E6%B2%BB/"/>
    
  </entry>
  
  <entry>
    <title>更有效地解决括号匹配问题</title>
    <link href="https://blog.whff521.xyz/2024/08/26/%E6%9B%B4%E6%9C%89%E6%95%88%E5%9C%B0%E8%A7%A3%E5%86%B3%E6%8B%AC%E5%8F%B7%E5%8C%B9%E9%85%8D%E9%97%AE%E9%A2%98/"/>
    <id>https://blog.whff521.xyz/2024/08/26/%E6%9B%B4%E6%9C%89%E6%95%88%E5%9C%B0%E8%A7%A3%E5%86%B3%E6%8B%AC%E5%8F%B7%E5%8C%B9%E9%85%8D%E9%97%AE%E9%A2%98/</id>
    <published>2024-08-26T00:11:50.000Z</published>
    <updated>2024-08-26T00:34:09.296Z</updated>
    
    <content type="html"><![CDATA[<p>这是力扣上一道非常简单的问题，是经典的解决括号匹配问题。当然做法是用一个栈即可解决问题。<br><a href="https://leetcode.cn/problems/valid-parentheses/description/?envType=study-plan-v2&envId=2024-spring-sprint-100">有效的括号</a></p><p>这是我的代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        Stack&lt;Character&gt; st = <span class="keyword">new</span> <span class="title class_">Stack</span>();</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</span><br><span class="line">            <span class="type">Character</span> <span class="variable">nowC</span> <span class="operator">=</span> s.charAt(i);</span><br><span class="line">            <span class="keyword">if</span>(nowC==<span class="string">&#x27;(&#x27;</span>||nowC==<span class="string">&#x27;&#123;&#x27;</span>||nowC==<span class="string">&#x27;[&#x27;</span>)&#123;</span><br><span class="line">                st.push(nowC);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(st.empty())&#123;</span><br><span class="line">                    flag = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> st.pop();</span><br><span class="line">                <span class="keyword">if</span>((nowC==<span class="string">&#x27;)&#x27;</span>&amp;&amp;c!=<span class="string">&#x27;(&#x27;</span>)||(nowC==<span class="string">&#x27;]&#x27;</span>&amp;&amp;c!=<span class="string">&#x27;[&#x27;</span>)||(nowC==<span class="string">&#x27;&#125;&#x27;</span>&amp;&amp;c!=<span class="string">&#x27;&#123;&#x27;</span>))&#123;</span><br><span class="line">                    flag = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!st.empty()) flag = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>显然我的代码是可以不费力的通过测试的。但是我还是去看了一眼题解。 </p><p>这是力扣官方题解。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> s.length();</span><br><span class="line">        <span class="keyword">if</span> (n % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Map&lt;Character, Character&gt; pairs = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Character, Character&gt;() &#123;&#123;</span><br><span class="line">            put(<span class="string">&#x27;)&#x27;</span>, <span class="string">&#x27;(&#x27;</span>);</span><br><span class="line">            put(<span class="string">&#x27;]&#x27;</span>, <span class="string">&#x27;[&#x27;</span>);</span><br><span class="line">            put(<span class="string">&#x27;&#125;&#x27;</span>, <span class="string">&#x27;&#123;&#x27;</span>);</span><br><span class="line">        &#125;&#125;;</span><br><span class="line">        Deque&lt;Character&gt; stack = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;Character&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="type">char</span> <span class="variable">ch</span> <span class="operator">=</span> s.charAt(i);</span><br><span class="line">            <span class="keyword">if</span> (pairs.containsKey(ch)) &#123;</span><br><span class="line">                <span class="keyword">if</span> (stack.isEmpty() || stack.peek() != pairs.get(ch)) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                stack.pop();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                stack.push(ch);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stack.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">作者：力扣官方题解</span><br><span class="line">链接：https:<span class="comment">//leetcode.cn/problems/valid-parentheses/solutions/373578/you-xiao-de-gua-hao-by-leetcode-solution/</span></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure><p>想必大家已经能够看到官方题解和我的代码有着一个明显的差别，那就是题解用了另一个数据结构——<code>Map</code>。  </p><p>用到<code>Map</code>的理由也是非常的简单，就是判断小括号，中括号，大括号匹配的时候，用<code>Map</code>的<code>key-value</code>一一对应能够完美解决。这里的操作看似画蛇添足，但是代码在拓展性上大大增强，只需要更改键值对的内容，就可以把代码扩展到任意匹配问题。  </p><p>还有一点值得一提，就是<code>java</code>中的<code>stack</code>实际上就是<code>vector</code>的一种。整体来看，双端队列能够实现栈的所有功能，且适用范围更加广泛，所以大多数定义栈的时候都会直接用<code>Deque</code>。</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;这是力扣上一道非常简单的问题，是经典的解决括号匹配问题。当然做法是用一个栈即可解决问题。&lt;br&gt;&lt;a</summary>
        
      
    
    
    
    <category term="算法题" scheme="https://blog.whff521.xyz/categories/%E7%AE%97%E6%B3%95%E9%A2%98/"/>
    
    
    <category term="leetcode" scheme="https://blog.whff521.xyz/tags/leetcode/"/>
    
    <category term="括号匹配" scheme="https://blog.whff521.xyz/tags/%E6%8B%AC%E5%8F%B7%E5%8C%B9%E9%85%8D/"/>
    
  </entry>
  
  <entry>
    <title>博客的免费图床方案</title>
    <link href="https://blog.whff521.xyz/2024/07/08/%E5%8D%9A%E5%AE%A2%E7%9A%84%E5%85%8D%E8%B4%B9%E5%9B%BE%E5%BA%8A%E6%96%B9%E6%A1%88/"/>
    <id>https://blog.whff521.xyz/2024/07/08/%E5%8D%9A%E5%AE%A2%E7%9A%84%E5%85%8D%E8%B4%B9%E5%9B%BE%E5%BA%8A%E6%96%B9%E6%A1%88/</id>
    <published>2024-07-08T12:04:40.000Z</published>
    <updated>2024-09-04T09:44:46.343Z</updated>
    
    <content type="html"><![CDATA[<h1 id="博客的免费图床方案（Cloudflare-R2-PicGo）"><a href="#博客的免费图床方案（Cloudflare-R2-PicGo）" class="headerlink" title="博客的免费图床方案（Cloudflare R2 + PicGo）"></a>博客的免费图床方案（Cloudflare R2 + PicGo）</h1><p><a href="https://www.pseudoyu.com/zh/2024/06/30/free_image_hosting_system_using_r2_webp_cloud_and_picgo/">参考博客</a>  </p><p>这个博客写的已经非常详细清楚了，这里不再赘述实现步骤。  </p><p>这里记录一下我是怎么发现这篇博客的。  </p><p>在一个很无聊的时间段，我打开了<code>Inoreader</code>看RSS订阅的博客列表有没有更新，其中有一篇少数派的博客吸引了我，<a href="https://sspai.com/post/90223">是这个博客</a>。</p><p><img src="http://images.whff521.top/Screenshot%202024-07-08%20at%2020.10.44.png" alt="sspai">  </p><p>这里博主提到了<a href="https://x.com/pseudo_yu">他的推特账号</a>。其中很近的时间里他发布了上面提到的免费图床方案的博文。  </p><p>这篇博客解决了我正在苦恼的问题，那就是博文中图片的插入。如果是只有一个github pages的静态网站还好说，直接传在相对文件夹里即可。但是如果面对多平台，比如我还想在csdn中发布，那就变得很麻烦，因为markdown里写的相对路径将不可用，最直接的办法就是更改每个图片链接。  </p><p>然而如果是有自己的图床就很方便了，不用担心网络上的图片会突然失效，多平台发布也不用更改自己的截图路径。上方的图片就是用我自己实现的图库。  </p><p>事实上这个免费解决方案是相对于已经使用过CloudFlare和买过且用过域名的人看的。有一些点没有提及。首先你如果想用R2的话你最好有一张VISA卡进行账户的认证。还有对于公共的域名，如果想用自己的域名，首先这个域名的DNS的NameServer需要改成CloudFlare的，也就是说这里的自定义域名只能是在CloudFlare里进行代理的域名，当然有免费计划可以用。  </p><p>还有关于PicGo这个软件，对于Mac用户来说，你可能会遇到一个问题，就是安装后系统不让你打开并使用这个软件，系统会提示你把它扔进垃圾桶里，因为里面的证书不对。这里解决方案是<a href="https://youngjuning.js.org/bd534125c87e/?highlight=picgo#%E5%AE%89%E8%A3%85%E6%96%B9%E5%BC%8F">来自这个博客</a>  </p><p>终端输入：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo xattr -r -d com.apple.quarantine 你的APP路径</span><br></pre></td></tr></table></figure><p>APP 路径的获取方法：</p><p>打开 “访达”（Finder）进入 “应用程序” 目录，找到该软件图标，将图标拖到终端窗口，最终的命令类似:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo xattr -r -d com.apple.quarantine <span class="string">&#x27;/Applications/PicGo.app&#x27;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;博客的免费图床方案（Cloudflare-R2-PicGo）&quot;&gt;&lt;a href=&quot;#博客的免费图床方案（Cloudflare-R2-PicGo）&quot; class=&quot;headerlink&quot; title=&quot;博客的免费图床方案（Cloudflare R2 +</summary>
        
      
    
    
    
    <category term="计算机相关" scheme="https://blog.whff521.xyz/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9B%B8%E5%85%B3/"/>
    
    
    <category term="mac" scheme="https://blog.whff521.xyz/tags/mac/"/>
    
    <category term="博客" scheme="https://blog.whff521.xyz/tags/%E5%8D%9A%E5%AE%A2/"/>
    
    <category term="图床" scheme="https://blog.whff521.xyz/tags/%E5%9B%BE%E5%BA%8A/"/>
    
    <category term="PicGo" scheme="https://blog.whff521.xyz/tags/PicGo/"/>
    
    <category term="Cloudflare" scheme="https://blog.whff521.xyz/tags/Cloudflare/"/>
    
  </entry>
  
  <entry>
    <title>Eloquent JavaScript 09 Exercises</title>
    <link href="https://blog.whff521.xyz/2024/06/22/Eloquent-JavaScript-09-Exercises/"/>
    <id>https://blog.whff521.xyz/2024/06/22/Eloquent-JavaScript-09-Exercises/</id>
    <published>2024-06-22T13:39:01.000Z</published>
    <updated>2024-06-22T14:36:28.467Z</updated>
    
    <content type="html"><![CDATA[<h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><p><a href="https://eloquentjavascript.net/09_regexp.html">To the book page</a>  </p><h2 id="Regexp-golf"><a href="#Regexp-golf" class="headerlink" title="Regexp golf"></a>Regexp golf</h2><p>注意这里如果写对的话，应该什么都不会输出。  </p><p>正则表达式中的<code>\b</code>是单词边界的标志，它用来匹配一个单词的边界。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Fill in the regular expressions</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 正则表达式应该匹配“car”和“cat”，但不匹配其他字符串。</span></span><br><span class="line"><span class="title function_">verify</span>(<span class="regexp">/ca[rt]/</span>,</span><br><span class="line">       [<span class="string">&quot;my car&quot;</span>, <span class="string">&quot;bad cats&quot;</span>],</span><br><span class="line">       [<span class="string">&quot;camper&quot;</span>, <span class="string">&quot;high art&quot;</span>]);</span><br><span class="line"><span class="comment">// 正则表达式应该匹配“pop”和“prop”，但不匹配其他字符串。</span></span><br><span class="line"><span class="title function_">verify</span>(<span class="regexp">/pr?op/</span>,</span><br><span class="line">       [<span class="string">&quot;pop culture&quot;</span>, <span class="string">&quot;mad props&quot;</span>],</span><br><span class="line">       [<span class="string">&quot;plop&quot;</span>, <span class="string">&quot;prrrop&quot;</span>]);</span><br><span class="line"><span class="comment">// 正则表达式应该匹配“ferret”，“ferry”和“ferrari”，但不匹配其他字符串。</span></span><br><span class="line"><span class="title function_">verify</span>(<span class="regexp">/ferr(et|y|ari)/</span>,</span><br><span class="line">       [<span class="string">&quot;ferret&quot;</span>, <span class="string">&quot;ferry&quot;</span>, <span class="string">&quot;ferrari&quot;</span>],</span><br><span class="line">       [<span class="string">&quot;ferrum&quot;</span>, <span class="string">&quot;transfer A&quot;</span>]);</span><br><span class="line"><span class="comment">// 正则表达式应该匹配以“ious”结尾的任何单词。</span></span><br><span class="line"><span class="title function_">verify</span>(<span class="regexp">/\b\w*ious\b/</span>,</span><br><span class="line">       [<span class="string">&quot;how delicious&quot;</span>, <span class="string">&quot;spacious room&quot;</span>],</span><br><span class="line">       [<span class="string">&quot;ruinous&quot;</span>, <span class="string">&quot;consciousness&quot;</span>]);</span><br><span class="line"><span class="comment">// 正则表达式应该匹配空白字符后跟一个句号、逗号、冒号或分号。</span></span><br><span class="line"><span class="title function_">verify</span>(<span class="regexp">/\s[.,;:]/</span>,</span><br><span class="line">       [<span class="string">&quot;bad punctuation .&quot;</span>],</span><br><span class="line">       [<span class="string">&quot;escape the period&quot;</span>]);</span><br><span class="line"><span class="comment">// 正则表达式应该匹配长度大于六个字母的单词。</span></span><br><span class="line"><span class="title function_">verify</span>(<span class="regexp">/\b\w&#123;7,&#125;\b/</span>,</span><br><span class="line">       [<span class="string">&quot;Siebentausenddreihundertzweiundzwanzig&quot;</span>],</span><br><span class="line">       [<span class="string">&quot;no&quot;</span>, <span class="string">&quot;three small words&quot;</span>]);</span><br><span class="line"><span class="comment">// 正则表达式应该匹配不包含字母“e”或“E”的单词。</span></span><br><span class="line"><span class="title function_">verify</span>(<span class="regexp">/\b[a-df-zA-DF-Z]+\b/</span>,</span><br><span class="line">       [<span class="string">&quot;red platypus&quot;</span>, <span class="string">&quot;wobbling nest&quot;</span>],</span><br><span class="line">       [<span class="string">&quot;earth bed&quot;</span>, <span class="string">&quot;bedrøvet abe&quot;</span>, <span class="string">&quot;BEET&quot;</span>]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">verify</span>(<span class="params">regexp, yes, no</span>) &#123;</span><br><span class="line">  <span class="comment">// Ignore unfinished exercises</span></span><br><span class="line">  <span class="keyword">if</span> (regexp.<span class="property">source</span> == <span class="string">&quot;...&quot;</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> str <span class="keyword">of</span> yes) <span class="keyword">if</span> (!regexp.<span class="title function_">test</span>(str)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Failure to match &#x27;<span class="subst">$&#123;str&#125;</span>&#x27;`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> str <span class="keyword">of</span> no) <span class="keyword">if</span> (regexp.<span class="title function_">test</span>(str)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Unexpected match for &#x27;<span class="subst">$&#123;str&#125;</span>&#x27;`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Quoting-style"><a href="#Quoting-style" class="headerlink" title="Quoting style"></a>Quoting style</h2><p>将句子中的单引号换成双引号，但是单词缩写不能变，比如“aren’t”  </p><p>这里调试了半天，因为我错误的将<code>|</code>写成中文的<code>｜</code>了。。。  </p><ul><li><code>(^|\W)</code>：匹配开头或非字母字符后面的单引号。</li><li><code>(\W|$)</code>：匹配单引号后面紧跟非字母字符或字符串结尾。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> text = <span class="string">&quot;&#x27;I&#x27;m the cook,&#x27; he said, &#x27;it&#x27;s my job.&#x27;&quot;</span>;</span><br><span class="line"><span class="comment">// Change this call.</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(text.<span class="title function_">replace</span>(<span class="regexp">/(^|\W)&#x27;|&#x27;(\W|$)/g</span>,<span class="string">&#x27;$1&quot;$2&#x27;</span>));</span><br><span class="line"><span class="comment">// → &quot;I&#x27;m the cook,&quot; he said, &quot;it&#x27;s my job.&quot;</span></span><br></pre></td></tr></table></figure><h2 id="Numbers-again"><a href="#Numbers-again" class="headerlink" title="Numbers again"></a>Numbers again</h2><p>为了编写一个匹配JavaScript风格数字的正则表达式，我们需要支持以下特性：</p><ul><li>可选的正负号</li><li>可选的十进制点</li><li>指数表示法（e或E），以及可选的正负号</li></ul><p>以下是我们可以遵循的步骤：</p><ol><li><strong>可选的正负号</strong>：<code>[+-]?</code></li><li><strong>整数和小数部分</strong>：<ul><li>整数部分：<code>\d*</code></li><li>小数部分：<code>\.\d+</code></li></ul></li><li><strong>指数部分</strong>：<code>e[+-]?\d+</code></li></ol><p>将这些部分组合在一起，我们得到一个正则表达式来匹配JavaScript风格的数字：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> number = <span class="regexp">/^[+-]?(\d+(\.\d*)?|\.\d+)([eE][+-]?\d+)?$/</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Tests:</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> str <span class="keyword">of</span> [<span class="string">&quot;1&quot;</span>, <span class="string">&quot;-1&quot;</span>, <span class="string">&quot;+15&quot;</span>, <span class="string">&quot;1.55&quot;</span>, <span class="string">&quot;.5&quot;</span>, <span class="string">&quot;5.&quot;</span>,</span><br><span class="line">                 <span class="string">&quot;1.3e2&quot;</span>, <span class="string">&quot;1E-4&quot;</span>, <span class="string">&quot;1e+12&quot;</span>]) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!number.<span class="title function_">test</span>(str)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Failed to match &#x27;<span class="subst">$&#123;str&#125;</span>&#x27;`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> str <span class="keyword">of</span> [<span class="string">&quot;1a&quot;</span>, <span class="string">&quot;+-1&quot;</span>, <span class="string">&quot;1.2.3&quot;</span>, <span class="string">&quot;1+1&quot;</span>, <span class="string">&quot;1e4.5&quot;</span>,</span><br><span class="line">                 <span class="string">&quot;.5.&quot;</span>, <span class="string">&quot;1f5&quot;</span>, <span class="string">&quot;.&quot;</span>]) &#123;</span><br><span class="line">  <span class="keyword">if</span> (number.<span class="title function_">test</span>(str)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Incorrectly accepted &#x27;<span class="subst">$&#123;str&#125;</span>&#x27;`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h3><ul><li><code>^[+-]?</code>：匹配开头的可选正负号。</li><li><code>(\d+(\.\d*)?|\.\d+)</code>：匹配整数或小数部分。<ul><li><code>\d+(\.\d*)?</code>：匹配整数部分，后面跟着可选的小数部分。例如，<code>123</code>或<code>123.456</code>。</li><li><code>|\.\d+</code>：或者匹配只有小数点和小数部分。例如，<code>.456</code>。</li></ul></li><li><code>([eE][+-]?\d+)?</code>：匹配可选的指数部分。<ul><li><code>[eE]</code>：匹配<code>e</code>或<code>E</code>。</li><li><code>[+-]?</code>：匹配可选的正负号。</li><li><code>\d+</code>：匹配一或多个数字。</li></ul></li><li><code>$</code>：匹配字符串的结尾。</li></ul>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;正则表达式&quot;&gt;&lt;a href=&quot;#正则表达式&quot; class=&quot;headerlink&quot; title=&quot;正则表达式&quot;&gt;&lt;/a&gt;正则表达式&lt;/h1&gt;&lt;p&gt;&lt;a</summary>
        
      
    
    
    
    <category term="JavaScript" scheme="https://blog.whff521.xyz/categories/JavaScript/"/>
    
    
    <category term="javascript" scheme="https://blog.whff521.xyz/tags/javascript/"/>
    
  </entry>
  
</feed>
